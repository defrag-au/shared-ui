// Memory Card Component Styles
@use "variables" as v;

.memory-card {
    position: relative;
    aspect-ratio: 1;
    cursor: pointer;
    perspective: 1000px;
    transition: transform 0.1s ease;

    // Size variants
    &--xs {
        width: v.$memory-card-xs;
        --card-radius: #{v.$card-radius-xs};
    }
    &--sm {
        width: v.$memory-card-sm;
        --card-radius: #{v.$card-radius-xs};
    }
    &--md {
        width: v.$memory-card-md;
        --card-radius: #{v.$card-radius-sm};
    }
    &--lg {
        width: v.$memory-card-lg;
        --card-radius: #{v.$card-radius-sm};
    }

    // Hover/active states
    &:hover:not(&--disabled):not(&--matched) {
        transform: scale(1.02);
    }

    &:active:not(&--disabled):not(&--matched) {
        transform: scale(0.98);
    }

    // Disabled state
    &--disabled {
        cursor: not-allowed;
        opacity: 0.7;
    }

    // Matched state
    &--matched {
        cursor: default;

        .memory-card__inner {
            box-shadow: 0 0 8px v.$accent-gold;
            animation: matched-glow 2s ease-in-out infinite;
        }
    }

    // Flipped state
    &--flipped .memory-card__inner {
        transform: rotateY(180deg);
    }
}

.memory-card__inner {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: transform v.$transition-slow;
    border-radius: var(--card-radius, v.$card-radius-sm);
}

.memory-card__front,
.memory-card__back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: var(--card-radius, v.$card-radius-sm);
    overflow: hidden;
}

.memory-card__front {
    background: v.$bg-secondary;
    border: 2px solid v.$border-color;
}

.memory-card__back {
    transform: rotateY(180deg);
}

// Card back design (skull pattern)
.memory-card__back-design {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, v.$bg-primary 0%, v.$bg-secondary 50%, v.$bg-primary 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;

    // Inner border
    &::before {
        content: "";
        position: absolute;
        inset: 8px;
        border: 2px solid v.$accent-gold;
        border-radius: v.$card-radius-xs;
    }

    // Corner accents
    &::after {
        content: "";
        position: absolute;
        inset: 4px;
        background:
            linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, transparent 20%),
            linear-gradient(225deg, rgba(255, 215, 0, 0.2) 0%, transparent 20%),
            linear-gradient(315deg, rgba(255, 215, 0, 0.2) 0%, transparent 20%),
            linear-gradient(45deg, rgba(255, 215, 0, 0.2) 0%, transparent 20%);
    }
}

.memory-card__skull {
    width: 40%;
    height: 40%;
    background: rgba(255, 255, 255, 0.1);
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12c0 3.31 1.61 6.24 4.09 8.05L6 22l2-2h8l2 2-.09-1.95C20.39 18.24 22 15.31 22 12c0-5.52-4.48-10-10-10zm-2 14H8v-2h2v2zm0-4H8V8h2v4zm6 4h-2v-2h2v2zm0-4h-2V8h2v4z'/%3E%3C/svg%3E");
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12c0 3.31 1.61 6.24 4.09 8.05L6 22l2-2h8l2 2-.09-1.95C20.39 18.24 22 15.31 22 12c0-5.52-4.48-10-10-10zm-2 14H8v-2h2v2zm0-4H8V8h2v4zm6 4h-2v-2h2v2zm0-4h-2V8h2v4z'/%3E%3C/svg%3E");
    mask-size: contain;
    -webkit-mask-size: contain;
    mask-repeat: no-repeat;
    -webkit-mask-repeat: no-repeat;
    mask-position: center;
    -webkit-mask-position: center;
    z-index: 1;
}

.memory-card__matched-by {
    position: absolute;
    top: 0.25rem;
    right: 0.25rem;
    padding: 0.15rem 0.4rem;
    background: v.$accent-gold-strong;
    color: #000;
    font-size: 0.6rem;
    font-weight: 600;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    border-radius: v.$card-radius-xs;
    white-space: nowrap;
    z-index: 10;
}

@keyframes matched-glow {
    0%, 100% {
        box-shadow: 0 0 6px rgba(255, 215, 0, 0.2);
    }
    50% {
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.35);
    }
}
